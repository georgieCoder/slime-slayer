/*! For license information please see 537.ae3ef398.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkslime_slayer=self.webpackChunkslime_slayer||[]).push([[149,537],{9443:(t,e,n)=>{n(70228),n(31706);var r=n(68257),o=n(2057),i=n(17320),a=n(78685);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var s=function(t){var e,n,r,i=t.contentRef,u=(0,o.useRef)(null),s=(0,o.useRef)(null),l=c((0,o.useState)(!1),2),f=l[0],h=l[1],v=c((0,o.useState)(0),2),d=v[0],m=v[1],p=c((0,o.useState)(0),2),y=p[0],g=p[1],b=(0,o.useRef)(!1),w=function(){if(i.current&&s.current&&u.current&&b.current){var t=i.current,e=s.current.clientHeight-u.current.clientHeight,n=t.scrollTop/(t.scrollHeight-t.clientHeight)*e||0;g(n),u.current&&(u.current.style.top="".concat(n,"px"))}};return(0,o.useEffect)((function(){w()}),[null===(e=i.current)||void 0===e?void 0:e.scrollTop]),(0,o.useEffect)((function(){null!==i.current&&null!==s.current&&(console.log(i.current.scrollHeight,s.current.clientHeight),b.current=i.current.scrollHeight>s.current.clientHeight)}),[null===(n=i.current)||void 0===n?void 0:n.scrollHeight,null===(r=s.current)||void 0===r?void 0:r.clientHeight]),(0,o.useEffect)((function(){var t=function(t){if(f&&u.current&&s.current&&i.current){var e=s.current,n=i.current,r=t.clientY-e.getBoundingClientRect().top-d,o=e.clientHeight-u.current.clientHeight;r=Math.max(0,Math.min(r,o)),u.current&&(u.current.style.top="".concat(r,"px"));var a=r/o;n.scrollTop=a*(n.scrollHeight-n.clientHeight)}},e=function(){h(!1)};return f&&b.current&&(document.addEventListener("mousemove",t),document.addEventListener("mouseup",e)),function(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e)}}),[f,d,i,b]),(0,o.useEffect)((function(){var t;return console.log("subscribe to scoll",b.current,i.current),b.current&&(null===(t=i.current)||void 0===t||t.addEventListener("scroll",w)),function(){var t;console.log("unsubscribe to scroll"),null===(t=i.current)||void 0===t||t.removeEventListener("scroll",w)}}),[i,b]),(0,a.jsx)("div",{ref:s,className:"information-panel_slider-container",children:(0,a.jsx)("div",{ref:u,className:"information-panel_slider slider image",onMouseDown:function(t){var e;t.preventDefault(),h(!0),m(t.clientY-((null===(e=u.current)||void 0===e?void 0:e.getBoundingClientRect().top)||0))},style:{top:"".concat(y,"px")}})})},l=function(t){var e=t.title,n=t.children,r=t.onBack;return(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsx)("button",{onClick:r,className:"modal-back-btn",children:(0,a.jsx)("svg",{className:"image svg_clickable svg_clickable__dark",viewBox:"0 0 512 512",children:(0,a.jsx)("path",{d:"M320 149.5V192H21v128h299v85h43v-42h42v-43h43v-43h43v-42h-43v-43h-43v-43h-42v-42h-43v42.5z"})})}),(0,a.jsx)("h2",{className:"modal-title",children:e}),(0,a.jsx)("div",{className:"modal-body",children:n})]})};function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){return t[t.hello=0]="hello",t[t.version054=1]="version054",t[t.credits=2]="credits",t}(m||{}),p=d(d(d({},m.hello,(function(t){var e=t.onBack;return(0,a.jsx)(l,{title:"Привет!",onBack:e,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Это наша первая игра, где вам нужно сражаться со слаймами, чтобы набрать как можно больше очков. Это не финальная версия, и в следующем обновлении мы планируем добавить:"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"Лидерборд (игроки с наибольшим количеством очков попадут в таблицу лидеров);"}),(0,a.jsx)("li",{children:"Улучшение графики (добавление теней для слаймов и т. д.);"}),(0,a.jsx)("li",{children:"Добавление бесконечного режима для набора ещё большего количества очков."})]}),(0,a.jsx)("p",{children:"Мы очень старались и надеемся, что вам понравится! Пока игра не идеальна, и если вы обнаружили баги, хотите предложить идеи по улучшению игры или будущего контента - присылайте их на почту: ascaredgeorgy@yandex.ru или в Telegram: @ropasopa."}),(0,a.jsxs)("p",{children:["По коммерческим вопросам пишите сюда: ",(0,a.jsx)("a",{href:"https://vk.com/anasteyshanora",target:"_blank",children:"https://vk.com/anasteyshanora"})]})]})})})),m.version054,(function(t){var e=t.onBack;return(0,a.jsx)(l,{title:"v0.5.4",onBack:e,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"В новой версии мы добавили:"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"Новые виды слаймов с уникальными способностями"}),(0,a.jsx)("li",{children:"Систему прокачки персонажа"}),(0,a.jsx)("li",{children:"Дополнительные уровни сложности"})]}),(0,a.jsx)("p",{children:"Также исправлены основные баги предыдущей версии и улучшена производительность."})]})})})),m.credits,(function(t){var e=t.onBack;return(0,a.jsx)(l,{title:"Credits",onBack:e,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"Программирование - @ropasopa"}),(0,a.jsxs)("li",{children:["Анимация - ",(0,a.jsx)("a",{href:"https://vk.com/piskamiskasosiska",target:"_blank",children:"https://vk.com/piskamiskasosiska"})]}),(0,a.jsxs)("li",{children:["Визуал - ",(0,a.jsx)("a",{href:"https://vk.com/club173775696",target:"_blank",children:"https://vk.com/club173775696"})]})]}),(0,a.jsx)("p",{style:{marginTop:"6%"},children:"(комментарий программиста)"}),(0,a.jsx)("p",{children:"расширение лучше открывать в новой вкладке - интерфейс адаптивный и растянется на всю высоту страницы"})]})})})),y=[{id:m.hello,title:"Привет!"},{id:m.version054,title:"v0.5.4"},{id:m.credits,title:"Credits"}],g=function(t){var e,n=t.visible,r=t.setVisible,i=(0,o.useRef)(null),c=h((0,o.useState)(null),2),u=c[0],l=c[1];return n?(0,a.jsx)("div",{className:"information-panel icon",children:(0,a.jsxs)("div",{className:"information-panel_inner",children:[(0,a.jsx)("div",{className:"information-panel_header icon"}),(0,a.jsx)(s,{contentRef:i}),(0,a.jsx)("button",{onClick:function(){return r(!1)},className:"information-panel_close-btn close-btn icon"}),(0,a.jsx)("div",{className:"information-panel_inner-container",children:(0,a.jsx)("div",{ref:i,className:"information-panel_content",children:null===u?(0,a.jsx)("div",{className:"menu-items",children:y.map((function(t){return(0,a.jsx)("h2",{className:"menu-item",onClick:function(){l(t.id),i.current&&(console.log("set 0 scroll"),i.current.scrollTop=0)},children:t.title},t.id)}))}):(e=p[u],(0,a.jsx)(e,{onBack:function(){l(null),i.current&&(console.log("set 0 scroll"),i.current.scrollTop=0)}}))})})]})}):null},b=(0,n(48675).v)((function(t){return{gameStarted:!1,showLoader:!1,showMainMenu:!0,victory:!1,waveCount:0,pause:!1,gameOver:!1,startPlaying:!1,currentWave:0,score:0,gameInstance:null,descriptionChecked:!0,resetGameState:function(){return t({victory:!1,gameOver:!1,pause:!1,startPlaying:!1,currentWave:0,score:0})},setScore:function(e){return t({score:e})}}}));function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return x(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var j=function(){var t=b((function(t){return t.descriptionChecked})),e=w((0,o.useState)(!1),2),n=e[0],r=e[1],c=w((0,o.useState)(0),2),u=c[0],s=c[1],l=(0,o.useRef)(null),f=(0,o.useRef)(null),h=(0,o.useRef)(!1);return(0,a.jsxs)("div",{className:"main-screen",children:[(0,a.jsx)("div",{className:"main-screen_background image"}),(0,a.jsx)("div",{onClick:function(){r((function(t){return!t})),t||(localStorage.setItem("description-checked",JSON.stringify(!0)),b.setState({descriptionChecked:!0}))},className:"main-screen_about question-sign icon"}),!t&&(0,a.jsx)("span",{id:"new-description-label",children:"new!"}),(0,a.jsxs)("div",{className:"main-screen_play-btn play-btn",children:[(0,a.jsx)("button",{ref:l,className:"play-btn_text ",onClick:function(){var t;h.current||(l.current&&(l.current.disabled=!0),null===(t=f.current)||void 0===t||t.classList.remove("svg_clickable"),h.current=!0,s(1),setTimeout((function(){s(2),setTimeout((function(){i.J.emit("START_LOADING")}),500)}),750))},children:(0,a.jsx)("svg",{ref:f,className:"image svg_clickable",viewBox:"0 0 112.93 22.78",children:(0,a.jsx)("path",{className:"st0",d:"M18.47,0.04v22.78h-5.64v-9.58h-1.65v1.95H9.47v1.79H7.56v2H5.64v3.8H0V0h5.64v9.53h1.92v-2h1.71V5.75h1.91\r V3.79h1.65V0.04H18.47z M21.83,0v22.78h5.64V5.64h8.07V0H21.83z M54.07,1.83v9.56h-1.92v1.85h-3.73v1.95h-5.75v7.59h-5.65V0h13.36\r v1.83H54.07z M49.27,4.66h-6.6v5.81h3.89V9.51h1.86v-1h0.85V4.66z M61.57,16.92v3.93h0.1v-3.93H61.57z M76.82,17.08v5.7h-5.69v-1.93\r h-1.86v-3.93h-7.7v3.93h-1.81v1.93h-5.69v-5.7h1.91v-3.84h1.98v-5.7h1.75V3.75h1.86V0.03h7.7v1.8h1.86v5.79h1.91v3.93h1.92v5.53\r H76.82z M68.25,12.26V7.62H67.4V4.69h-2.91v1.92h-0.85v3.86h0.85v1.79H68.25z M112.93,11.39v7.54H111v1.92h-1.91v1.93H95.87V0h5.65\r v7.62h7.57v1.84H111v1.93H112.93z M105.37,17.92V16.2h1.91v-3.93h-5.76v5.65H105.37z M76.82,0v5.66h5.69v17.12h5.65V5.66h5.82V0\r H76.82z"})})}),(0,a.jsxs)("div",{className:"play-btn_slime",children:[0===u&&(0,a.jsx)("div",{className:"image sleeping-slime_sleep"}),1===u&&(0,a.jsx)("div",{className:"image sleeping-slime_awake"}),2===u&&(0,a.jsx)("div",{className:"image sleeping-slime_awaken"})]})]}),(0,a.jsx)(g,{visible:n,setVisible:r})]})},E=n(73475),S=n(86297);const _=n.p+"assets/2187051339a06aad3cad.webp",O=n.p+"assets/42079c04f0236725be1f.webp";function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function k(){k=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n,r){return Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r})}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function s(e,n,r,o){var i=n&&n.prototype instanceof h?n:h,a=Object.create(i.prototype);return u(a,"_invoke",function(e,n,r){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=x(c,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===o)throw o=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=3;var s=l(e,n,r);if("normal"===s.type){if(o=r.done?4:2,s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=4,r.method="throw",r.arg=s.arg)}}}(e,r,new S(o||[])),!0),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var f={};function h(){}function v(){}function d(){}var m={};u(m,i,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(_([])));y&&y!==n&&r.call(y,i)&&(m=y);var g=d.prototype=h.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==A(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;u(this,"_invoke",(function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,n){var r=n.method,o=e.i[r];if(o===t)return n.delegate=null,"throw"===r&&e.i.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var i=l(o,e.i,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,f;var a=i.arg;return a?a.done?(n[e.r]=a.value,n.next=e.n,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function j(t){this.tryEntries.push(t)}function E(e){var n=e[4]||{};n.type="normal",n.arg=t,e[4]=n}function S(t){this.tryEntries=[[-1]],t.forEach(j,this),this.reset(!0)}function _(e){if(null!=e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(A(e)+" is not iterable")}return v.prototype=d,u(g,"constructor",d),u(d,"constructor",v),v.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new w(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}},e.values=_,S.prototype={constructor:S,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(t){a.type="throw",a.arg=e,n.next=t}for(var o=n.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],c=this.prev,u=i[1],s=i[2];if(-1===i[0])return r("end"),!1;if(!u&&!s)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=c){if(c<u)return this.method="next",this.arg=t,r(u),!0;if(c<s)return r(s),!1}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var o=r;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[2]===t)return this.complete(n[4],n[3]),E(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]===t){var r=n[4];if("throw"===r.type){var o=r.arg;E(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={i:_(e),r:n,n:r},"next"===this.method&&(this.arg=t),f}},e}function N(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return R(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var P=function(){var t=(0,o.useRef)(null),e=(0,o.useRef)(null),n=(0,o.useRef)(null),r=(0,o.useRef)(null),c=T((0,o.useState)(0),2),u=c[0],s=c[1],l=T((0,o.useState)(0),2),f=l[0],h=l[1],v=(0,o.useRef)(0),d=(0,o.useRef)(0),m=T((0,o.useState)(!1),2),p=m[0],y=m[1],g=T((0,o.useState)(!1),2),b=g[0],w=g[1],x=T((0,o.useState)(162),2),j=x[0],A=x[1],R=1500;return(0,o.useEffect)((function(){var e=function(){if(t.current){var e=.52*t.current.clientWidth;A(e)}};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[t]),(0,o.useEffect)((function(){if(b&&p){var e=Date.now()-d.current,n=Math.max(0,R-e);setTimeout((function(){var e;null===(e=t.current)||void 0===e||e.classList.remove("visible"),i.J.emit("STOP_LOADING")}),n)}}),[b,p]),(0,o.useEffect)((function(){var e;return null===(e=t.current)||void 0===e||e.classList.add("visible"),d.current=Date.now(),function(){v.current&&cancelAnimationFrame(v.current)}}),[]),(0,o.useEffect)((function(){var t=function(){var o=Date.now()-d.current,i=Math.min(o/R,1),a=Math.min(f,1),c=u+.1*(a-u),l=Math.max(.3*i,c),h=Math.min(l,1);s(h);var m=h*j;e.current&&(e.current.style.transform="translateX(".concat(m,"px)")),n.current&&(n.current.style.transform="translateX(".concat(m,"px)")),r.current&&(r.current.style.transform="translateX(".concat(m,"px)")),(h<1||o<R)&&(v.current=requestAnimationFrame(t))};return v.current=requestAnimationFrame(t),function(){v.current&&cancelAnimationFrame(v.current)}}),[f,u,j]),(0,o.useEffect)((function(){var t=function(t){h(t)},e=function(){h(1),w(!0)},n=function(){var t,e=(t=k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,S.H)([_,O],"image");case 3:y(!0),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error("Preloading failed:",t.t0),y(!1);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){N(i,r,o,a,c,"next",t)}function c(t){N(i,r,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return n(),E.u.on("LOAD_PROGRESS",t),E.u.on("GAME_STARTED",e),function(){E.u.off("LOAD_PROGRESS",t),E.u.off("GAME_STARTED",e)}}),[]),(0,a.jsx)("div",{className:"loader image overlay",ref:t,children:(0,a.jsxs)("div",{className:"loader_loading-bar",children:[(0,a.jsx)("div",{className:"loader_loading-bar__content",children:(0,a.jsx)("div",{className:"loader_loading-bar__bar image",ref:e})}),(0,a.jsx)("div",{className:"loader_loading-bar__frame image"}),(0,a.jsx)("div",{className:"loader_loading-bar__slime",ref:n,children:(0,a.jsx)("div",{className:"icon yellow-slime"})}),(0,a.jsx)("div",{className:"loader_loading-bar__smoke",ref:r,children:(0,a.jsx)("div",{className:"icon white-smoke"})})]})})};function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function L(){L=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n,r){return Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r})}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function s(e,n,r,o){var i=n&&n.prototype instanceof h?n:h,a=Object.create(i.prototype);return u(a,"_invoke",function(e,n,r){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=x(c,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===o)throw o=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=3;var s=l(e,n,r);if("normal"===s.type){if(o=r.done?4:2,s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=4,r.method="throw",r.arg=s.arg)}}}(e,r,new S(o||[])),!0),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var f={};function h(){}function v(){}function d(){}var m={};u(m,i,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(_([])));y&&y!==n&&r.call(y,i)&&(m=y);var g=d.prototype=h.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==M(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;u(this,"_invoke",(function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,n){var r=n.method,o=e.i[r];if(o===t)return n.delegate=null,"throw"===r&&e.i.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var i=l(o,e.i,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,f;var a=i.arg;return a?a.done?(n[e.r]=a.value,n.next=e.n,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function j(t){this.tryEntries.push(t)}function E(e){var n=e[4]||{};n.type="normal",n.arg=t,e[4]=n}function S(t){this.tryEntries=[[-1]],t.forEach(j,this),this.reset(!0)}function _(e){if(null!=e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(M(e)+" is not iterable")}return v.prototype=d,u(g,"constructor",d),u(d,"constructor",v),v.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new w(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,c,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}},e.values=_,S.prototype={constructor:S,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(t){a.type="throw",a.arg=e,n.next=t}for(var o=n.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],c=this.prev,u=i[1],s=i[2];if(-1===i[0])return r("end"),!1;if(!u&&!s)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=c){if(c<u)return this.method="next",this.arg=t,r(u),!0;if(c<s)return r(s),!1}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var o=r;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[2]===t)return this.complete(n[4],n[3]),E(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]===t){var r=n[4];if("throw"===r.type){var o=r.arg;E(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={i:_(e),r:n,n:r},"next"===this.method&&(this.arg=t),f}},e}function C(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}var H=function(){(0,o.useEffect)((function(){var t=function(){var t,e=(t=L().mark((function t(){var e,r,o;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.setState({showLoader:!0}),setTimeout((function(){return b.setState({showMainMenu:!1})}),1e3),t.next=4,n.e(418).then(n.t.bind(n,64663,23));case 4:return t.next=6,Promise.all([n.e(485),n.e(418)]).then(n.bind(n,10061));case 6:e=t.sent,r=e.initGame,o=r(),b.setState({gameInstance:o});case 10:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){C(i,r,o,a,c,"next",t)}function c(t){C(i,r,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),e=function(){return b.setState({showLoader:!1})},r=function(){return b.getState().resetGameState()};return i.J.on("START_LOADING",t),i.J.on("STOP_LOADING",e),i.J.on("RESTART",r),function(){i.J.off("START_LOADING",t),i.J.off("STOP_LOADING",e),i.J.off("RESTART",r)}}),[])};function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return G(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var D=function(t){var e=t.text,n=t.onComplete,r=t.duration,i=void 0===r?3e3:r,c=t.position,u=void 0===c?{x:"50%",y:"50%"}:c,s=t.rotation,l=void 0===s?0:s,f=t.initialFontSize,h=void 0===f?50:f,v=t.finalFontSize,d=void 0===v?100:v,m=t.color1,p=void 0===m?"white":m,y=t.color2,g=void 0===y?"red":y,b=t.color3,w=void 0===b?"yellow":b,x=I((0,o.useState)(!0),2),j=x[0],E=x[1];if((0,o.useEffect)((function(){var t=setTimeout((function(){E(!1),n&&n()}),i);return function(){return clearTimeout(t)}}),[n,i]),!j)return null;var S={"--duration":"".concat(i,"ms"),"--rotation":"".concat(l,"deg"),"--position-x":u.x,"--position-y":u.y,"--initial-font-size":"".concat(h,"px"),"--final-font-size":"".concat(d,"px"),"--color1":p,"--color2":g,"--color3":w};return(0,a.jsx)("div",{className:"popup-text",style:S,children:e})};function V(t){return function(t){if(Array.isArray(t))return B(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||F(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||F(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(t,e){if(t){if("string"==typeof t)return B(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(t,e):void 0}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var J=function(){var t=z((0,o.useState)([]),2),e=t[0],n=t[1];return{showPopup:function(t,e,r,o,i,c,u,s,l){var f=Date.now()+Math.random(),h=(0,a.jsx)(D,{text:t,onComplete:function(){n((function(t){return t.filter((function(t){return t.id!==f}))}))},duration:e,position:r,rotation:o,initialFontSize:i,finalFontSize:c,color1:u,color2:s,color3:l},f);n((function(t){return[].concat(V(t),[{node:h,id:f}])}))},popups:e.map((function(t){return t.node}))}},W=function(t){var e=t.children;return(0,a.jsx)("div",{className:"panel-container overlay",children:(0,a.jsx)("div",{className:"panel icon",children:(0,a.jsx)("div",{className:"panel_content",children:e})})})},U=function(){return(0,a.jsx)("div",{className:"game-over-screen_container overlay",children:(0,a.jsxs)(W,{children:[(0,a.jsx)("div",{className:"game-over-screen_death-image icon"}),(0,a.jsxs)("div",{className:"game-over-screen_content",children:[(0,a.jsx)("div",{className:"game-over-screen_frame icon",children:(0,a.jsx)("h2",{className:"game-over-screen_label",children:"Поражение"})}),(0,a.jsx)("p",{className:"game-over-screen_hint",children:"Нажми любую клавишу чтобы начать сначала"})]})]})})},Y=function(){return(0,a.jsxs)(W,{children:[(0,a.jsx)("div",{className:"pause-screen_slime icon"}),(0,a.jsxs)("div",{className:"pause-screen_content",children:[(0,a.jsx)("div",{className:"pause-screen_pause-icon icon"}),(0,a.jsx)("h2",{className:"pause-screen_label",children:"пауза"}),(0,a.jsx)("p",{className:"pause-screen_hint",children:"Нажми любую клавишу чтобы продолжить"})]})]})},$=function(){var t=b().score;return(0,a.jsx)("div",{className:"score-container",children:(0,a.jsx)("div",{className:"score image",children:(0,a.jsx)("p",{children:t})})})},K=function(){return(0,a.jsxs)("div",{className:"start-screen-hint overlay",children:[(0,a.jsx)("div",{className:"start-screen-hint_tutorial icon"}),(0,a.jsx)("h3",{className:"start-screen-hint_label hint",children:"Нажми любую клавишу чтобы играть"})]})};function q(t,e){return Math.floor(Math.random()*(e-t+1))+t}function X(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Z(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Q=function(){var t=b().gameInstance,e=J(),n=e.showPopup,r=e.popups;return(0,o.useEffect)((function(){if(t){var e=function(e,r,o){if(r&&o){var i=X(Object.values(r).map((function(e){return"".concat(Math.round(e*t.scale.zoom),"px")})),2),a=i[0],c=i[1],u=o<0?"rgb(255, 75, 75)":"#f2d53b";n((o<0?"":"+")+o.toString(),700,{x:a,y:c},q(-8,8),Math.min(20*window.innerWidth/318,20*window.innerHeight/500),Math.min(25*window.innerWidth/318,25*window.innerHeight/500),u,u,u)}},r=function(e){var r=X(Object.values(e).map((function(e){return"".concat(Math.round(e*t.scale.zoom),"px")})),2),o=r[0],i=r[1];n("ой",700,{x:o,y:i},q(-8,8),Math.min(20*window.innerWidth/318,20*window.innerHeight/500),Math.min(25*window.innerWidth/318,25*window.innerHeight/500),"rgb(255, 75, 75)","white","rgb(255, 75, 75)")};return E.u.on("CHANGE_SCORE",e),E.u.on("CHARACTER_TOOK_DAMAGE",r),function(){E.u.off("CHANGE_SCORE",e),E.u.off("CHARACTER_TOOK_DAMAGE",r)}}}),[t]),(0,a.jsx)(a.Fragment,{children:r})},tt=function(){return(0,a.jsx)("div",{className:"victory-screen overlay",children:(0,a.jsxs)("div",{className:"victory-screen_content",children:[(0,a.jsx)("div",{className:"victory-screen_text icon"}),(0,a.jsx)("div",{className:"victory-screen_slime icon"}),(0,a.jsx)("p",{className:"victory-screen_hint hint",children:"Нажми ЛКМ или R, чтобы начать сначала"})]})})},et=function(){var t=b(),e=t.currentWave,n=t.waveCount,r=(0,o.useRef)(e),i=J(),c=i.showPopup,u=i.popups;return(0,o.useEffect)((function(){if(e>r.current&&e!==n)return r.current=e,void c("Волна ".concat(e,"\nпройдена!"),1600,{x:"50%",y:"50%"},q(-15,15),Math.min(.094*window.innerWidth,.06*window.innerHeight),Math.min(.188*window.innerWidth,.12*window.innerHeight));0===e&&(r.current=0)}),[e]),(0,a.jsxs)("div",{className:"wave-system overlay",children:[(0,a.jsx)("p",{className:"current-wave",children:"".concat(e,"/").concat(n)}),u]})},nt=function(){var t=b(),e=t.victory,n=t.pause,r=t.gameOver,o=t.startPlaying;return(0,a.jsxs)("div",{className:"game-overlay overlay",children:[e&&(0,a.jsx)(tt,{}),!o&&(0,a.jsx)(K,{}),n&&(0,a.jsx)(Y,{}),r&&(0,a.jsx)(U,{}),(0,a.jsx)($,{}),(0,a.jsx)(et,{}),(0,a.jsx)(Q,{})]})},rt=function(){var t=b(),e=t.gameStarted,n=t.showLoader,r=t.showMainMenu,c=t.gameInstance,u=(0,o.useRef)(null);!function(){var t=b(),e=t.resetGameState,n=t.setScore;(0,o.useEffect)((function(){var t=function(){b.setState((function(t){return{currentWave:t.currentWave+1}}))},r=function(t,n){t||b.setState({gameStarted:!0,waveCount:n}),e()},o=function(){return b.setState({gameOver:!0})},i=function(){return b.setState({victory:!0})},a=function(t){return n(t)};return E.u.on("WAVE_COMPLETE",t),E.u.on("GAME_STARTED",r),E.u.on("GAME_OVER",o),E.u.on("VICTORY",i),E.u.on("CHANGE_SCORE",a),function(){E.u.off("WAVE_COMPLETE",t),E.u.off("GAME_STARTED",r),E.u.off("GAME_OVER",o),E.u.off("VICTORY",i),E.u.off("CHANGE_SCORE",a)}}),[e,n])}(),H(),function(){var t=b(),e=t.startPlaying,n=t.pause,r=t.gameOver,a=t.victory,c=t.resetGameState,u=t.showLoader;(0,o.useEffect)((function(){var t=function(n){e||u||(n.preventDefault(),n.stopPropagation(),b.setState({startPlaying:!0}),i.J.emit("START_PLAYING"),document.removeEventListener("keydown",t),document.removeEventListener("click",t))};return e||u||(document.addEventListener("keydown",t),document.addEventListener("click",t)),function(){document.removeEventListener("keydown",t),document.removeEventListener("click",t)}}),[e,u]),(0,o.useEffect)((function(){var t=function(){!r&&e&&(b.setState({pause:!0}),i.J.emit("PAUSE"))},o=function(t){"Escape"===t.key&&!r&&e&&b.setState((function(t){var e=!t.pause;return i.J.emit(e?"PAUSE":"RESUME"),{pause:e}}))},a=function(t){n&&(t.preventDefault(),t.stopPropagation(),b.setState({pause:!1}),i.J.emit("RESUME"))};return window.addEventListener("blur",t),window.addEventListener("contextmenu",t),document.addEventListener("keydown",o),document.addEventListener("keydown",a),document.addEventListener("click",a),function(){window.removeEventListener("blur",t),window.removeEventListener("contextmenu",t),document.removeEventListener("keydown",o),document.removeEventListener("keydown",a),document.removeEventListener("click",a)}}),[n,r,e]),(0,o.useEffect)((function(){var t=function(t){if(r&&!n)return c(),void i.J.emit("RESTART");if(a&&!n){if(t instanceof KeyboardEvent&&"KeyR"!==t.code)return;c(),i.J.emit("RESTART")}};return(r||a&&!n)&&(document.addEventListener("click",t),document.addEventListener("keydown",t)),function(){document.removeEventListener("click",t),document.removeEventListener("keydown",t)}}),[r,a,c,n])}(),(0,o.useEffect)((function(){var t=localStorage.getItem("description-checked");!(t&&JSON.parse(t))&&b.setState({descriptionChecked:!1})}),[]);var s,l,f=(0,o.useCallback)((function(t,e){setTimeout((function(){if(c){var n=t/318,r=e/500;c.scale.setZoom(Math.min(r,n))}}),100)}),[c]);return s=function(t){var e=t.contentRect,n=e.width,r=e.height;f(n,r)},l=u,(0,o.useEffect)((function(){var t=l.current;if(t){var e=new ResizeObserver((function(t){s(t[0])}));return e.observe(t),function(){return e.disconnect()}}}),[s,l]),(0,a.jsx)("div",{className:"app_container",children:(0,a.jsxs)("div",{className:"app",id:"game-container",ref:u,children:[e&&(0,a.jsx)(nt,{}),r&&(0,a.jsx)(j,{}),n&&(0,a.jsx)(P,{}),(0,a.jsx)("div",{style:{display:!n&&e?"block":"none"},className:"game-container_frame image"})]})})};(0,r.createRoot)(document.getElementById("root")).render((0,a.jsx)(o.StrictMode,{children:(0,a.jsx)(rt,{})}))},17320:(t,e,n)=>{n.d(e,{J:()=>v});var r=n(63790);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}function c(t,e,n){return e=f(e),function(t,e){if(e&&("object"==o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,n||[],f(t).constructor):e.apply(t,n))}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}function s(t,e,n,r){var o=l(f(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},l.apply(null,arguments)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}var v=new(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),n=e,r=[{key:"emit",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return s(e,"emit",this,3)([t].concat(r))}},{key:"on",value:function(t,n){return s(e,"on",this,3)([t,n])}},{key:"off",value:function(t,n){return s(e,"off",this,3)([t,n])}}],r&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(r.EventEmitter))},73475:(t,e,n)=>{n.d(e,{u:()=>v});var r=n(63790);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}function c(t,e,n){return e=f(e),function(t,e){if(e&&("object"==o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,n||[],f(t).constructor):e.apply(t,n))}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}function s(t,e,n,r){var o=l(f(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},l.apply(null,arguments)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}var v=new(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),n=e,r=[{key:"emit",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return s(e,"emit",this,3)([t].concat(r))}},{key:"on",value:function(t,n){return s(e,"on",this,3)([t,n])}},{key:"off",value:function(t,n){return s(e,"off",this,3)([t,n])}}],r&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(r.EventEmitter))}}]);
//# sourceMappingURL=537.ae3ef398.chunk.js.map